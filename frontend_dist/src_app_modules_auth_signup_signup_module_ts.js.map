{"version":3,"file":"src_app_modules_auth_signup_signup_module_ts.js","mappings":"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","sources":["./src/app/modules/auth/signup/signup-routing.module.ts","./src/app/modules/auth/signup/signup.module.ts","./src/app/modules/auth/signup/signup.page.ts","./src/app/modules/auth/signup/signup.page.scss"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { SignupPage } from './signup.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: SignupPage,\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class SignupPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { SignupPageRoutingModule } from './signup-routing.module';\r\n\r\nimport { SignupPage } from './signup.page';\r\nimport { PipesModule } from 'src/app/pipes/pipes.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ReactiveFormsModule,\r\n    PipesModule,\r\n    TranslateModule.forChild({\r\n      extend: true,\r\n    }),\r\n    SignupPageRoutingModule,\r\n  ],\r\n  declarations: [SignupPage],\r\n})\r\nexport class SignupPageModule {}\r\n","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { UntypedFormControl, UntypedFormGroup, FormGroupDirective, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { Store } from '@ngrx/store';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { Subject } from 'rxjs';\r\nimport { filter, startWith, switchMap, take, tap } from 'rxjs/operators';\r\nimport { IUser } from 'src/app/interfaces';\r\nimport { signup } from 'src/app/store/actions/auth.actions';\r\nimport { AuthService } from '../auth.service';\r\n\r\n@Component({\r\n  selector: 'app-signup',\r\n  templateUrl: './signup.page.html',\r\n  styleUrls: ['./signup.page.scss'],\r\n})\r\nexport class SignupPage implements OnInit {\r\n  @ViewChild('signupFormDirective', { static: false }) signupFormDirective: FormGroupDirective;\r\n\r\n  lang: string;\r\n  signupForm: UntypedFormGroup;\r\n  inputType: 'password' | 'text' = 'password';\r\n  formSubmitSubject$ = new Subject();\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    private router: Router,\r\n    public translate: TranslateService,\r\n    private store: Store,\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.lang = this.translate.currentLang;\r\n\r\n    this.signupForm = new UntypedFormGroup(\r\n      {\r\n        name: new UntypedFormControl('', {\r\n          updateOn: 'change',\r\n          validators: [\r\n            Validators.pattern('^[a-zA-Z0-9_\\\\-]+$'),\r\n            Validators.minLength(2),\r\n            Validators.maxLength(60),\r\n            Validators.required,\r\n          ],\r\n          // asyncValidators: [\r\n          //   this.userService.checkLoginUnique(),\r\n          // ],\r\n        }),\r\n        password: new UntypedFormControl('', {\r\n          updateOn: 'change',\r\n          validators: [\r\n            Validators.pattern('^[a-zA-Z0-9_\\\\-]+$'),\r\n            Validators.minLength(2),\r\n            Validators.maxLength(60),\r\n            Validators.required,\r\n          ],\r\n        }),\r\n        passwordConfirm: new UntypedFormControl('', {\r\n          updateOn: 'change',\r\n          validators: [\r\n            Validators.pattern('^[a-zA-Z0-9_\\\\-]+$'),\r\n            Validators.minLength(2),\r\n            Validators.maxLength(60),\r\n            Validators.required,\r\n          ],\r\n        }),\r\n        // email: new FormControl(\r\n        //   '',\r\n        //   {\r\n        //     updateOn: 'change',\r\n        //     validators: [\r\n        //       Validators.pattern('^[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,4}$'),\r\n        //       Validators.required,\r\n        //     ],\r\n        //     // asyncValidators: [\r\n        //     //   this.userService.checkEmailUnique(),\r\n        //     // ],\r\n        //   }),\r\n      },\r\n      this.authService.matchPassword,\r\n    );\r\n\r\n    // prevent form submit before async validator completes\r\n    this.formSubmitSubject$\r\n      .pipe(\r\n        tap(() => this.signupForm.markAsDirty()),\r\n        switchMap(() =>\r\n          this.signupForm.statusChanges.pipe(\r\n            startWith(this.signupForm.status),\r\n            filter((status) => status !== 'PENDING'),\r\n            take(1),\r\n          ),\r\n        ),\r\n        filter((status) => status === 'VALID'),\r\n      )\r\n      .subscribe((validationSuccessful) => this.onSignup());\r\n  }\r\n\r\n  switchInputType() {\r\n    if (this.inputType === 'password') {\r\n      this.inputType = 'text';\r\n    } else {\r\n      this.inputType = 'password';\r\n    }\r\n  }\r\n\r\n  onSignup() {\r\n    const user: IUser = {\r\n      name: this.signupForm.get('name').value,\r\n      password: this.signupForm.get('password').value,\r\n    };\r\n\r\n    this.store.dispatch(signup({ user }));\r\n    this.resetForm();\r\n  }\r\n\r\n  resetForm() {\r\n    if (this.signupFormDirective) {\r\n      this.signupFormDirective.resetForm();\r\n    }\r\n  }\r\n\r\n  switchLanguage() {\r\n    if (this.lang === 'en') {\r\n      this.lang = 'uk';\r\n    } else {\r\n      this.lang = 'en';\r\n    }\r\n    this.translate.use(this.lang);\r\n  }\r\n}\r\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n"],"names":["NgModule","RouterModule","SignupPage","routes","path","component","SignupPageRoutingModule","__decorate","imports","forChild","exports","CommonModule","FormsModule","ReactiveFormsModule","IonicModule","PipesModule","TranslateModule","SignupPageModule","extend","declarations","Component","ViewChild","UntypedFormControl","UntypedFormGroup","Validators","Router","Store","TranslateService","Subject","filter","startWith","switchMap","take","tap","signup","AuthService","_class","constructor","authService","router","translate","store","inputType","formSubmitSubject$","ngOnInit","lang","currentLang","signupForm","name","updateOn","validators","pattern","minLength","maxLength","required","password","passwordConfirm","matchPassword","pipe","markAsDirty","statusChanges","status","subscribe","validationSuccessful","onSignup","switchInputType","user","get","value","dispatch","resetForm","signupFormDirective","switchLanguage","use","args","static","selector","template","__NG_CLI_RESOURCE__0"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}